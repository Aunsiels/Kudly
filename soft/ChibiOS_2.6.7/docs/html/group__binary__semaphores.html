<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Binary Semaphores</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 92px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ChibiOS/RT<br><span id="projectnumber">2.6.7</span></div>
  </td>
  <td style="padding-left: 3em;">
<script type="text/javascript"><!--
google_ad_client = "pub-3840594581853944";
/* Documentation, bottom, 728x90, created 9/19/10 */
google_ad_slot = "1902290615";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__binary__semaphores.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Binary Semaphores<div class="ingroups"><a class="el" href="group__kernel.html">Kernel</a> &raquo; <a class="el" href="group__synchronization.html">Synchronization</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Binary Semaphores:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__binary__semaphores.png" border="0" alt="" usemap="#group____binary____semaphores"/>
<map name="group____binary____semaphores" id="group____binary____semaphores">
<area shape="rect" id="node1" href="group__synchronization.html" title="Synchronization" alt="" coords="5,5,116,29"/></map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Binary semaphores related APIs and services. </p><pre class="fragment">     &lt;h2&gt;Operation mode&lt;/h2&gt;
     Binary semaphores are implemented as a set of macros that use the
     existing counting semaphores primitives. The difference between
     counting and binary semaphores is that the counter of binary
     semaphores is not allowed to grow above the value 1. Repeated
     signal operation are ignored. A binary semaphore can thus have
     only two defined states:
     - &lt;b&gt;Taken&lt;/b&gt;, when its counter has a value of zero or lower
       than zero. A negative number represent the number of threads
       queued on the binary semaphore.
     - &lt;b&gt;Not taken&lt;/b&gt;, when its counter has a value of one.
     .
     Binary semaphores are different from mutexes because there is no
     the concept of ownership, a binary semaphore can be taken by a
     thread and signaled by another thread or an interrupt handler,
     mutexes can only be taken and released by the same thread. Another
     difference is that binary semaphores, unlike mutexes, do not
     implement the priority inheritance protocol.&lt;br&gt;
     In order to use the binary semaphores APIs the @p CH_USE_SEMAPHORES
     option must be enabled in @p chconf.h.</pre> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_binary_semaphore.html">BinarySemaphore</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binary semaphore type.  <a href="struct_binary_semaphore.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Macro Functions</h2></td></tr>
<tr class="memitem:ga5e2c36a8afc7e9e9b63d714f74a8aa3d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#ga5e2c36a8afc7e9e9b63d714f74a8aa3d">chBSemInit</a>(bsp,  taken)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gafe8fc6155a871074e8017efd908b2c58">chSemInit</a>(&amp;(bsp)-&gt;bs_sem, (taken) ? 0 : 1)</td></tr>
<tr class="memdesc:ga5e2c36a8afc7e9e9b63d714f74a8aa3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a binary semaphore.  <a href="#ga5e2c36a8afc7e9e9b63d714f74a8aa3d">More...</a><br /></td></tr>
<tr class="separator:ga5e2c36a8afc7e9e9b63d714f74a8aa3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad54b7533a92ee54219a065bc708e1b90"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#gad54b7533a92ee54219a065bc708e1b90">chBSemWait</a>(bsp)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gabc8f7e509870e9b0527a6a68fad71425">chSemWait</a>(&amp;(bsp)-&gt;bs_sem)</td></tr>
<tr class="memdesc:gad54b7533a92ee54219a065bc708e1b90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait operation on the binary semaphore.  <a href="#gad54b7533a92ee54219a065bc708e1b90">More...</a><br /></td></tr>
<tr class="separator:gad54b7533a92ee54219a065bc708e1b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3bfac62d3457be9f0cf7591060cc192"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#gae3bfac62d3457be9f0cf7591060cc192">chBSemWaitS</a>(bsp)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gaa2c0367078533e291d2e889e251d8b67">chSemWaitS</a>(&amp;(bsp)-&gt;bs_sem)</td></tr>
<tr class="memdesc:gae3bfac62d3457be9f0cf7591060cc192"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait operation on the binary semaphore.  <a href="#gae3bfac62d3457be9f0cf7591060cc192">More...</a><br /></td></tr>
<tr class="separator:gae3bfac62d3457be9f0cf7591060cc192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga784a1bac66648dc14258d19fd2ee22f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#ga784a1bac66648dc14258d19fd2ee22f6">chBSemWaitTimeout</a>(bsp,  time)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga0bc227311e5be3e3b6e3aee6a68169da">chSemWaitTimeout</a>(&amp;(bsp)-&gt;bs_sem, (time))</td></tr>
<tr class="memdesc:ga784a1bac66648dc14258d19fd2ee22f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait operation on the binary semaphore.  <a href="#ga784a1bac66648dc14258d19fd2ee22f6">More...</a><br /></td></tr>
<tr class="separator:ga784a1bac66648dc14258d19fd2ee22f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa3300a88f0f04720981a08d9cbdecbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#gafa3300a88f0f04720981a08d9cbdecbc">chBSemWaitTimeoutS</a>(bsp,  time)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga924ec5d191bb8debe8727ae4dd5d6d03">chSemWaitTimeoutS</a>(&amp;(bsp)-&gt;bs_sem, (time))</td></tr>
<tr class="memdesc:gafa3300a88f0f04720981a08d9cbdecbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait operation on the binary semaphore.  <a href="#gafa3300a88f0f04720981a08d9cbdecbc">More...</a><br /></td></tr>
<tr class="separator:gafa3300a88f0f04720981a08d9cbdecbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb4c3b8828eac8a7395dacde3c907c00"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#gaeb4c3b8828eac8a7395dacde3c907c00">chBSemReset</a>(bsp,  taken)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga58e266e609cfd3dbc67f299b3ae9debb">chSemReset</a>(&amp;(bsp)-&gt;bs_sem, (taken) ? 0 : 1)</td></tr>
<tr class="memdesc:gaeb4c3b8828eac8a7395dacde3c907c00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset operation on the binary semaphore.  <a href="#gaeb4c3b8828eac8a7395dacde3c907c00">More...</a><br /></td></tr>
<tr class="separator:gaeb4c3b8828eac8a7395dacde3c907c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac239ed4138c0e97baad85e7933183b5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#gac239ed4138c0e97baad85e7933183b5a">chBSemResetI</a>(bsp,  taken)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gae7972b6b22b80ac09bac5a186277ab81">chSemResetI</a>(&amp;(bsp)-&gt;bs_sem, (taken) ? 0 : 1)</td></tr>
<tr class="memdesc:gac239ed4138c0e97baad85e7933183b5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset operation on the binary semaphore.  <a href="#gac239ed4138c0e97baad85e7933183b5a">More...</a><br /></td></tr>
<tr class="separator:gac239ed4138c0e97baad85e7933183b5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87acf8fdfdbfc0f636051324ca37f693"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#ga87acf8fdfdbfc0f636051324ca37f693">chBSemSignal</a>(bsp)</td></tr>
<tr class="memdesc:ga87acf8fdfdbfc0f636051324ca37f693"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a signal operation on a binary semaphore.  <a href="#ga87acf8fdfdbfc0f636051324ca37f693">More...</a><br /></td></tr>
<tr class="separator:ga87acf8fdfdbfc0f636051324ca37f693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93748433268e9e631695216f17442cd9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#ga93748433268e9e631695216f17442cd9">chBSemSignalI</a>(bsp)</td></tr>
<tr class="memdesc:ga93748433268e9e631695216f17442cd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a signal operation on a binary semaphore.  <a href="#ga93748433268e9e631695216f17442cd9">More...</a><br /></td></tr>
<tr class="separator:ga93748433268e9e631695216f17442cd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga830d40c6493533f500a2c940c5cb5229"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#ga830d40c6493533f500a2c940c5cb5229">chBSemGetStateI</a>(bsp)&#160;&#160;&#160;((bsp)-&gt;bs_sem.s_cnt &gt; 0 ? <a class="el" href="group__kernel__info.html#gaa93f0eb578d23995850d61f7d61c55c1">FALSE</a> : <a class="el" href="group__kernel__info.html#gaa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)</td></tr>
<tr class="memdesc:ga830d40c6493533f500a2c940c5cb5229"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the binary semaphore current state.  <a href="#ga830d40c6493533f500a2c940c5cb5229">More...</a><br /></td></tr>
<tr class="separator:ga830d40c6493533f500a2c940c5cb5229"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga0599ffd617860509aa304ac7d8419c95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#ga0599ffd617860509aa304ac7d8419c95">_BSEMAPHORE_DATA</a>(name,  taken)&#160;&#160;&#160;{<a class="el" href="group__semaphores.html#ga1100c867cc8bd8328f7a7db5e7c74f6d">_SEMAPHORE_DATA</a>(name.bs_sem, ((taken) ? 0 : 1))}</td></tr>
<tr class="memdesc:ga0599ffd617860509aa304ac7d8419c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data part of a static semaphore initializer.  <a href="#ga0599ffd617860509aa304ac7d8419c95">More...</a><br /></td></tr>
<tr class="separator:ga0599ffd617860509aa304ac7d8419c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17b24824c80358258f4036d25cffb9d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__binary__semaphores.html#ga17b24824c80358258f4036d25cffb9d9">BSEMAPHORE_DECL</a>(name,  taken)&#160;&#160;&#160;<a class="el" href="struct_binary_semaphore.html">BinarySemaphore</a> name = <a class="el" href="group__binary__semaphores.html#ga0599ffd617860509aa304ac7d8419c95">_BSEMAPHORE_DATA</a>(name, taken)</td></tr>
<tr class="memdesc:ga17b24824c80358258f4036d25cffb9d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static semaphore initializer.  <a href="#ga17b24824c80358258f4036d25cffb9d9">More...</a><br /></td></tr>
<tr class="separator:ga17b24824c80358258f4036d25cffb9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga0599ffd617860509aa304ac7d8419c95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _BSEMAPHORE_DATA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">taken&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{<a class="el" href="group__semaphores.html#ga1100c867cc8bd8328f7a7db5e7c74f6d">_SEMAPHORE_DATA</a>(name.bs_sem, ((taken) ? 0 : 1))}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data part of a static semaphore initializer. </p>
<p>This macro should be used when statically initializing a semaphore that is part of a bigger structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the semaphore variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">taken</td><td>the semaphore initial state </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00080">80</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga17b24824c80358258f4036d25cffb9d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSEMAPHORE_DECL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">taken&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="struct_binary_semaphore.html">BinarySemaphore</a> name = <a class="el" href="group__binary__semaphores.html#ga0599ffd617860509aa304ac7d8419c95">_BSEMAPHORE_DATA</a>(name, taken)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Static semaphore initializer. </p>
<p>Statically initialized semaphores require no explicit initialization using <code><a class="el" href="group__binary__semaphores.html#ga5e2c36a8afc7e9e9b63d714f74a8aa3d" title="Initializes a binary semaphore. ">chBSemInit()</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the semaphore variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">taken</td><td>the semaphore initial state </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00091">91</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5e2c36a8afc7e9e9b63d714f74a8aa3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemInit</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">taken&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gafe8fc6155a871074e8017efd908b2c58">chSemInit</a>(&amp;(bsp)-&gt;bs_sem, (taken) ? 0 : 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a binary semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">taken</td><td>initial state of the binary semaphore:<ul>
<li><em>FALSE</em>, the initial state is not taken.</li>
<li><em>TRUE</em>, the initial state is taken.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Initializer, this function just initializes an object and can be invoked before the kernel is initialized. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00109">109</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad54b7533a92ee54219a065bc708e1b90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemWait</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gabc8f7e509870e9b0527a6a68fad71425">chSemWait</a>(&amp;(bsp)-&gt;bs_sem)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait operation on the binary semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RDY_OK</td><td>if the binary semaphore has been successfully taken. </td></tr>
    <tr><td class="paramname">RDY_RESET</td><td>if the binary semaphore has been reset using <code>bsemReset()</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00123">123</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae3bfac62d3457be9f0cf7591060cc192"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemWaitS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gaa2c0367078533e291d2e889e251d8b67">chSemWaitS</a>(&amp;(bsp)-&gt;bs_sem)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait operation on the binary semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RDY_OK</td><td>if the binary semaphore has been successfully taken. </td></tr>
    <tr><td class="paramname">RDY_RESET</td><td>if the binary semaphore has been reset using <code>bsemReset()</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>S-Class</b> API, this function can be invoked from within a system lock zone by threads only. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00137">137</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga784a1bac66648dc14258d19fd2ee22f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemWaitTimeout</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">time&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga0bc227311e5be3e3b6e3aee6a68169da">chSemWaitTimeout</a>(&amp;(bsp)-&gt;bs_sem, (time))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait operation on the binary semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>the number of ticks before the operation timeouts, the following special values are allowed:<ul>
<li><em>TIME_IMMEDIATE</em> immediate timeout.</li>
<li><em>TIME_INFINITE</em> no timeout.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RDY_OK</td><td>if the binary semaphore has been successfully taken. </td></tr>
    <tr><td class="paramname">RDY_RESET</td><td>if the binary semaphore has been reset using <code>bsemReset()</code>. </td></tr>
    <tr><td class="paramname">RDY_TIMEOUT</td><td>if the binary semaphore has not been signaled or reset within the specified timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00158">158</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gafa3300a88f0f04720981a08d9cbdecbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemWaitTimeoutS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">time&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga924ec5d191bb8debe8727ae4dd5d6d03">chSemWaitTimeoutS</a>(&amp;(bsp)-&gt;bs_sem, (time))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait operation on the binary semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>the number of ticks before the operation timeouts, the following special values are allowed:<ul>
<li><em>TIME_IMMEDIATE</em> immediate timeout.</li>
<li><em>TIME_INFINITE</em> no timeout.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RDY_OK</td><td>if the binary semaphore has been successfully taken. </td></tr>
    <tr><td class="paramname">RDY_RESET</td><td>if the binary semaphore has been reset using <code>bsemReset()</code>. </td></tr>
    <tr><td class="paramname">RDY_TIMEOUT</td><td>if the binary semaphore has not been signaled or reset within the specified timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>S-Class</b> API, this function can be invoked from within a system lock zone by threads only. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00179">179</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaeb4c3b8828eac8a7395dacde3c907c00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemReset</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">taken&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga58e266e609cfd3dbc67f299b3ae9debb">chSemReset</a>(&amp;(bsp)-&gt;bs_sem, (taken) ? 0 : 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset operation on the binary semaphore. </p>
<dl class="section note"><dt>Note</dt><dd>The released threads can recognize they were waked up by a reset rather than a signal because the <code>bsemWait()</code> will return <code>RDY_RESET</code> instead of <code>RDY_OK</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">taken</td><td>new state of the binary semaphore<ul>
<li><em>FALSE</em>, the new state is not taken.</li>
<li><em>TRUE</em>, the new state is taken.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00195">195</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac239ed4138c0e97baad85e7933183b5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemResetI</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">taken&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#gae7972b6b22b80ac09bac5a186277ab81">chSemResetI</a>(&amp;(bsp)-&gt;bs_sem, (taken) ? 0 : 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset operation on the binary semaphore. </p>
<dl class="section note"><dt>Note</dt><dd>The released threads can recognize they were waked up by a reset rather than a signal because the <code>bsemWait()</code> will return <code>RDY_RESET</code> instead of <code>RDY_OK</code>. </dd>
<dd>
This function does not reschedule.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">taken</td><td>new state of the binary semaphore<ul>
<li><em>FALSE</em>, the new state is not taken.</li>
<li><em>TRUE</em>, the new state is taken.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00212">212</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga87acf8fdfdbfc0f636051324ca37f693"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemSignal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                                                 <a class="code" href="group__system.html#ga9f6573c0763d1e4e97c63c62edad6e42">\</a></div>
<div class="line"><a class="code" href="group__system.html#ga9f6573c0763d1e4e97c63c62edad6e42">  chSysLock</a>();                                                              <a class="code" href="group__binary__semaphores.html#ga93748433268e9e631695216f17442cd9">\</a></div>
<div class="line"><a class="code" href="group__binary__semaphores.html#ga93748433268e9e631695216f17442cd9">  chBSemSignalI</a>((bsp));                                                     <a class="code" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">\</a></div>
<div class="line"><a class="code" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">  chSchRescheduleS</a>();                                                       <a class="code" href="group__system.html#ga5a257fa58a09815eb64a45e2dfbdc22e">\</a></div>
<div class="line"><a class="code" href="group__system.html#ga5a257fa58a09815eb64a45e2dfbdc22e">  chSysUnlock</a>();                                                            \</div>
<div class="line">}</div>
<div class="ttc" id="group__system_html_ga5a257fa58a09815eb64a45e2dfbdc22e"><div class="ttname"><a href="group__system.html#ga5a257fa58a09815eb64a45e2dfbdc22e">chSysUnlock</a></div><div class="ttdeci">#define chSysUnlock()</div><div class="ttdoc">Leaves the kernel lock mode. </div><div class="ttdef"><b>Definition:</b> <a href="chsys_8h_source.html#l00152">chsys.h:152</a></div></div>
<div class="ttc" id="group__scheduler_html_ga4e38b4bee3d2330f6a0f1cdb7660af20"><div class="ttname"><a href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">chSchRescheduleS</a></div><div class="ttdeci">void chSchRescheduleS(void)</div><div class="ttdoc">Performs a reschedule if a higher priority thread is runnable. </div><div class="ttdef"><b>Definition:</b> <a href="chschd_8c_source.html#l00253">chschd.c:253</a></div></div>
<div class="ttc" id="group__binary__semaphores_html_ga93748433268e9e631695216f17442cd9"><div class="ttname"><a href="group__binary__semaphores.html#ga93748433268e9e631695216f17442cd9">chBSemSignalI</a></div><div class="ttdeci">#define chBSemSignalI(bsp)</div><div class="ttdoc">Performs a signal operation on a binary semaphore. </div><div class="ttdef"><b>Definition:</b> <a href="chbsem_8h_source.html#l00236">chbsem.h:236</a></div></div>
<div class="ttc" id="group__system_html_ga9f6573c0763d1e4e97c63c62edad6e42"><div class="ttname"><a href="group__system.html#ga9f6573c0763d1e4e97c63c62edad6e42">chSysLock</a></div><div class="ttdeci">#define chSysLock()</div><div class="ttdoc">Enters the kernel lock mode. </div><div class="ttdef"><b>Definition:</b> <a href="chsys_8h_source.html#l00142">chsys.h:142</a></div></div>
</div><!-- fragment -->
<p>Performs a signal operation on a binary semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00221">221</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga93748433268e9e631695216f17442cd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemSignalI</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                                                \</div>
<div class="line">  if ((bsp)-&gt;bs_sem.s_cnt &lt; 1)                                              <a class="code" href="group__semaphores.html#gaca0b70cf495a9cb7569e1cf5b07e2b3d">\</a></div>
<div class="line"><a class="code" href="group__semaphores.html#gaca0b70cf495a9cb7569e1cf5b07e2b3d">    chSemSignalI</a>(&amp;(bsp)-&gt;bs_sem);                                           \</div>
<div class="line">}</div>
<div class="ttc" id="group__semaphores_html_gaca0b70cf495a9cb7569e1cf5b07e2b3d"><div class="ttname"><a href="group__semaphores.html#gaca0b70cf495a9cb7569e1cf5b07e2b3d">chSemSignalI</a></div><div class="ttdeci">void chSemSignalI(Semaphore *sp)</div><div class="ttdoc">Performs a signal operation on a semaphore. </div><div class="ttdef"><b>Definition:</b> <a href="chsem_8c_source.html#l00303">chsem.c:303</a></div></div>
</div><!-- fragment -->
<p>Performs a signal operation on a binary semaphore. </p>
<dl class="section note"><dt>Note</dt><dd>This function does not reschedule.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00236">236</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga830d40c6493533f500a2c940c5cb5229"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chBSemGetStateI</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bsp</td><td>)</td>
          <td>&#160;&#160;&#160;((bsp)-&gt;bs_sem.s_cnt &gt; 0 ? <a class="el" href="group__kernel__info.html#gaa93f0eb578d23995850d61f7d61c55c1">FALSE</a> : <a class="el" href="group__kernel__info.html#gaa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the binary semaphore current state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bsp</td><td>pointer to a <code><a class="el" href="struct_binary_semaphore.html" title="Binary semaphore type. ">BinarySemaphore</a></code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The binary semaphore current state. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>if the binary semaphore is not taken. </td></tr>
    <tr><td class="paramname">TRUE</td><td>if the binary semaphore is taken.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chbsem_8h_source.html#l00251">251</a> of file <a class="el" href="chbsem_8h_source.html">chbsem.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
    <li class="footer">
      <a href="http://sourceforge.net/projects/chibios">
        <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=205897&amp;type=11"
             border="0" width="120" height="30"
             alt="Get ChibiOS/RT embedded RTOS at SourceForge.net. Fast,
                  secure and Free Open Source software downloads"/>
      </a>
    </li>
  </ul>
</div>
<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://apps.sourceforge.net/piwik/chibios/" : "http://apps.sourceforge.net/piwik/chibios/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
piwik_action_name = '';
piwik_idsite = 1;
piwik_url = pkBaseURL + "piwik.php";
piwik_log(piwik_action_name, piwik_idsite, piwik_url);
</script>
<object><noscript><p><img src="http://apps.sourceforge.net/piwik/chibios/piwik.php?idsite=1" alt="piwik"/></p></noscript></object>
<!-- End Piwik Tag -->
</body>
</html>
